<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Î‘Î³ÏŒÏÎ±ÏƒÎµ Î†Î´ÎµÎ¹Î± POSPal - Î£ÏÏƒÏ„Î·Î¼Î± POS Î³Î¹Î± Î•ÏƒÏ„Î¹Î±Ï„ÏŒÏÎ¹Î±</title>
    <link rel="icon" href="app_icon.ico">
    <script src="https://js.stripe.com/v3/"></script>
    
    <style>
        body { font-family: 'Inter', sans-serif; }
        .brand-600 { color: #059669; }
        .gradient-bg { background: linear-gradient(135deg, #059669 0%, #047857 100%); }
        .card-hover:hover { transform: translateY(-4px); box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
        .fade-in-up { animation: fadeInUp 0.8s ease-out forwards; }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
    
    <script src="./static/vendor/tailwindcdn.js"></script>
    <link rel="stylesheet" href="./static/css/fonts.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'brand': {
                            600: '#059669',
                            700: '#047857'
                        },
                        'accent': {
                            500: '#10b981'
                        }
                    }
                }
            }
        }
    </script>
    <link href="./static/vendor/fontawesome/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gradient-to-br from-gray-50 to-white">
    
    <!-- Header -->
    <header class="relative z-50 bg-white shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center space-x-3">
                    <img src="app_icon.ico" alt="POSPal Logo" class="w-10 h-10 rounded-xl">
                    <span class="text-2xl font-bold text-gray-900">POSPal</span>
                </div>
                <div class="hidden md:flex items-center space-x-6">
                    <a href="index.html" class="text-gray-600 hover:text-brand-600 font-medium transition-colors">Î‘ÏÏ‡Î¹ÎºÎ®</a>
                    <a href="POSPal_Demo_Index.html" class="text-gray-600 hover:text-brand-600 font-medium transition-colors">Demo</a>
                    <a href="index.html#pricing" class="text-gray-600 hover:text-brand-600 font-medium transition-colors">Î¤Î¹Î¼Î®</a>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <section class="py-12 lg:py-20">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            
            <!-- Page Title -->
            <div class="text-center mb-12 lg:mb-16 fade-in-up">
                <h1 class="text-4xl lg:text-5xl font-bold text-gray-900 mb-6">
                    Î‘Î³ÏŒÏÎ±ÏƒÎµ <span class="text-brand-600">Î†Î´ÎµÎ¹Î± POSPal</span>
                </h1>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                    Î Î»Î®ÏÎµÏ‚ ÏƒÏÏƒÏ„Î·Î¼Î± POS Î³Î¹Î± Ï„Î·Î½ ÎµÏ€Î¹Ï‡ÎµÎ¯ÏÎ·ÏƒÎ® ÏƒÎ¿Ï… - Î•Ï†Î¬Ï€Î±Î¾ Ï€Î»Î·ÏÏ‰Î¼Î®, Î´Î¹ÎºÏŒ ÏƒÎ¿Ï… Î³Î¹Î± Ï€Î¬Î½Ï„Î±
                </p>
            </div>

            <!-- Important Notice -->
            <div class="max-w-4xl mx-auto mb-16 fade-in-up">
                <div class="bg-red-50 border border-red-200 rounded-2xl p-8">
                    <div class="flex items-start">
                        <i class="fas fa-exclamation-triangle text-red-600 text-2xl mt-1 mr-6 flex-shrink-0"></i>
                        <div>
                            <h3 class="text-2xl font-bold text-red-800 mb-4">Î£Î·Î¼Î±Î½Ï„Î¹ÎºÏŒ - Î”Î¹Î¬Î²Î±ÏƒÎµ Ï€ÏÎ¿ÏƒÎµÎºÏ„Î¹ÎºÎ¬!</h3>
                            <div class="grid md:grid-cols-3 gap-6 text-red-700">
                                <div>
                                    <h4 class="font-semibold mb-2">ğŸ“§ Email Î Î±ÏÎ¬Î´Î¿ÏƒÎ·</h4>
                                    <p class="text-sm">Î— Î¬Î´ÎµÎ¹Î± Î¸Î± ÏƒÏ„Î±Î»ÎµÎ¯ ÏƒÏ„Î¿ email Ï€Î¿Ï… Î¸Î± Î´Î·Î»ÏÏƒÎµÎ¹Ï‚. Î•Î»Î­Î³Î¾Ï„Îµ Ï„Î¿ Ï€ÏÎ¿ÏƒÎµÎºÏ„Î¹ÎºÎ¬!</p>
                                </div>
                                <div>
                                    <h4 class="font-semibold mb-2">ğŸ”’ Hardware ID</h4>
                                    <p class="text-sm">Î ÏÎ­Ï€ÎµÎ¹ Î½Î± ÎµÎ¯Î½Î±Î¹ 100% ÏƒÏ‰ÏƒÏ„ÏŒ - Î· Î¬Î´ÎµÎ¹Î± Î´Î¿Ï…Î»ÎµÏÎµÎ¹ Î¼ÏŒÎ½Î¿ ÏƒÎµ Î±Ï…Ï„ÏŒÎ½ Ï„Î¿Î½ Ï…Ï€Î¿Î»Î¿Î³Î¹ÏƒÏ„Î®.</p>
                                </div>
                                <div>
                                    <h4 class="font-semibold mb-2">âš ï¸ ÎœÎ· Î‘Î»Î»Î¬Î¾Î¹Î¼Î¿</h4>
                                    <p class="text-sm">Î”ÎµÎ½ Î¼Ï€Î¿ÏÎ¿ÏÎ¼Îµ Î½Î± Î±Î»Î»Î¬Î¾Î¿Ï…Î¼Îµ Ï„Î¿ Hardware ID Î¼ÎµÏ„Î¬ Ï„Î·Î½ Î±Î³Î¿ÏÎ¬.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Content Grid -->
            <div class="grid xl:grid-cols-3 gap-8 lg:gap-12">
                
                <!-- License Info Sidebar -->
                <div class="xl:col-span-1 fade-in-up">
                    <div class="bg-white p-8 rounded-2xl shadow-lg border border-gray-100 sticky top-8">
                        <div class="text-center mb-8">
                            <div class="text-6xl font-bold text-brand-600 mb-3">â‚¬290</div>
                            <div class="text-gray-500 text-lg">Î•Ï†Î¬Ï€Î±Î¾ Ï€Î»Î·ÏÏ‰Î¼Î®</div>
                        </div>
                        
                        <ul class="space-y-4">
                            <li class="flex items-center text-gray-700">
                                <i class="fas fa-check text-accent-500 mr-4 text-lg"></i>
                                <span>Î Î»Î®ÏÎµÏ‚ ÏƒÏÏƒÏ„Î·Î¼Î± POS</span>
                            </li>
                            <li class="flex items-center text-gray-700">
                                <i class="fas fa-check text-accent-500 mr-4 text-lg"></i>
                                <span>QR Î¼ÎµÎ½Î¿Ï & online Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯ÎµÏ‚</span>
                            </li>
                            <li class="flex items-center text-gray-700">
                                <i class="fas fa-check text-accent-500 mr-4 text-lg"></i>
                                <span>Î•ÎºÏ„Ï…Ï€ÏÏƒÎµÎ¹Ï‚ & Î±Î½Î±Ï†Î¿ÏÎ­Ï‚</span>
                            </li>
                            <li class="flex items-center text-gray-700">
                                <i class="fas fa-check text-accent-500 mr-4 text-lg"></i>
                                <span>Î”Ï‰ÏÎµÎ¬Î½ ÎµÎ½Î·Î¼ÎµÏÏÏƒÎµÎ¹Ï‚</span>
                            </li>
                            <li class="flex items-center text-gray-700">
                                <i class="fas fa-check text-accent-500 mr-4 text-lg"></i>
                                <span>Î§Ï‰ÏÎ¯Ï‚ Î¼Î·Î½Î¹Î±Î¯ÎµÏ‚ Ï‡ÏÎµÏÏƒÎµÎ¹Ï‚</span>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Purchase Form -->
                <div class="xl:col-span-2 fade-in-up">
                    <div class="bg-white rounded-2xl shadow-lg border border-gray-100">
                        
                        <!-- Form Header -->
                        <div class="p-8 pb-0">
                            <h2 class="text-3xl font-bold text-gray-900 mb-2">Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î± Î‘Î³Î¿ÏÎ¬Ï‚</h2>
                            <p class="text-gray-600">Î£Ï…Î¼Ï€Î»Î®ÏÏ‰ÏƒÎµ Ï„Î± ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Î± ÏƒÎ¿Ï… Î³Î¹Î± Î½Î± Ï€ÏÎ¿Ï‡Ï‰ÏÎ®ÏƒÎµÎ¹Ï‚ ÏƒÏ„Î·Î½ Ï€Î»Î·ÏÏ‰Î¼Î®</p>
                        </div>
                        
                        <!-- Form -->
                        <form id="license-form" class="p-8">
                            
                            <!-- Personal Info Section -->
                            <div class="mb-12">
                                <h3 class="text-xl font-semibold text-gray-900 mb-6">Î ÏÎ¿ÏƒÏ‰Ï€Î¹ÎºÎ¬ Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î±</h3>
                                <div class="grid md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-3">ÎŒÎ½Î¿Î¼Î± *</label>
                                        <input 
                                            type="text" 
                                            id="customer-name" 
                                            required 
                                            class="w-full px-4 py-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-600 focus:border-brand-600 transition-colors text-lg"
                                            placeholder="Î¤Î¿ ÏŒÎ½Î¿Î¼Î¬ ÏƒÎ±Ï‚"
                                        >
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-3">ÎŒÎ½Î¿Î¼Î± Î•Ï€Î¹Ï‡ÎµÎ¯ÏÎ·ÏƒÎ·Ï‚ (Î ÏÎ¿Î±Î¹ÏÎµÏ„Î¹ÎºÏŒ)</label>
                                        <input 
                                            type="text" 
                                            id="restaurant-name" 
                                            class="w-full px-4 py-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-600 focus:border-brand-600 transition-colors text-lg"
                                            placeholder="Ï€.Ï‡. ÎšÎ±Ï†ÎµÏ„Î­ÏÎ¹Î± Î‘ÎºÏÏŒÏ€Î¿Î»Î¹Ï‚"
                                        >
                                    </div>
                                </div>
                            </div>

                            <!-- Email Section -->
                            <div class="mb-12">
                                <h3 class="text-xl font-semibold text-gray-900 mb-3">Email Î Î±ÏÎ¬Î´Î¿ÏƒÎ·Ï‚</h3>
                                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                                    <p class="text-blue-800 text-sm flex items-center">
                                        <i class="fas fa-info-circle mr-2"></i>
                                        <strong>Î— Î¬Î´ÎµÎ¹Î¬ ÏƒÎ¿Ï… Î¸Î± ÏƒÏ„Î±Î»ÎµÎ¯ ÏƒÏ„Î¿ email Ï€Î¿Ï… Î¸Î± Î´Î·Î»ÏÏƒÎµÎ¹Ï‚. Î•Î»Î­Î³Î¾Ï„Îµ Ï„Î¿ Ï€ÏÎ¿ÏƒÎµÎºÏ„Î¹ÎºÎ¬!</strong>
                                    </p>
                                </div>
                                <div class="grid md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-3">
                                            Email * <span class="text-red-600">(Î•Î´Ï Î¸Î± ÏƒÏ„Î±Î»ÎµÎ¯ Î· Î¬Î´ÎµÎ¹Î±)</span>
                                        </label>
                                        <input 
                                            type="email" 
                                            id="customer-email" 
                                            required 
                                            class="w-full px-4 py-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-600 focus:border-brand-600 transition-colors text-lg"
                                            placeholder="email@example.com"
                                        >
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-3">
                                            Î•Ï€Î¹Î²ÎµÎ²Î±Î¯Ï‰ÏƒÎ· Email * <span class="text-red-600">(ÎÎ±Î½Î±Î³ÏÎ¬ÏˆÎµ)</span>
                                        </label>
                                        <input 
                                            type="email" 
                                            id="customer-email-confirm" 
                                            required 
                                            class="w-full px-4 py-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-600 focus:border-brand-600 transition-colors text-lg"
                                            placeholder="email@example.com (Î¾Î±Î½Î¬)"
                                        >
                                    </div>
                                </div>
                            </div>

                            <!-- Hardware ID Section -->
                            <div class="mb-8">
                                <h3 class="text-xl font-semibold text-gray-900 mb-3">Hardware ID</h3>
                                
                                <!-- Hardware ID Instructions -->
                                <div class="bg-amber-50 border border-amber-200 rounded-lg p-6 mb-6">
                                    <div class="flex items-start">
                                        <i class="fas fa-laptop text-amber-600 text-2xl mr-4 mt-1"></i>
                                        <div>
                                            <h4 class="font-semibold text-amber-800 mb-3">Î ÏÏ‚ Î½Î± Î²ÏÎµÎ¹Ï‚ Ï„Î¿ Hardware ID:</h4>
                                            <ol class="text-amber-700 space-y-2">
                                                <li><strong>1.</strong> ÎšÎ±Ï„Î­Î²Î±ÏƒÎµ ÎºÎ±Î¹ Î¬Î½Î¿Î¹Î¾Îµ Ï„Î¿ POSPal</li>
                                                <li><strong>2.</strong> Î Î®Î³Î±Î¹Î½Îµ ÏƒÏ„Î¿ <strong>Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· â†’ Î†Î´ÎµÎ¹Î±</strong></li>
                                                <li><strong>3.</strong> ÎšÎ¬Î½Îµ ÎºÎ»Î¹Îº <strong>"Î‘Î½Ï„Î¯Î³ÏÎ±ÏˆÎµ"</strong> Î´Î¯Ï€Î»Î± ÏƒÏ„Î¿ Hardware ID</li>
                                                <li><strong>4.</strong> ÎšÏŒÎ»Î»Î·ÏƒÎµ Ï„Î¿ <strong>ÎŸÎ›ÎŸÎšÎ›Î—Î¡ÎŸ</strong> ÏƒÏ„Î¿ Ï€ÎµÎ´Î¯Î¿ Ï€Î±ÏÎ±ÎºÎ¬Ï„Ï‰</li>
                                            </ol>
                                            <p class="text-amber-800 mt-4 font-semibold">
                                                âš ï¸ Î Î¡ÎŸÎ£ÎŸÎ§Î—: Î‘Î½ Ï„Î¿ Hardware ID ÎµÎ¯Î½Î±Î¹ Î»Î¬Î¸Î¿Ï‚, Î· Î¬Î´ÎµÎ¹Î± Î”Î•Î Î¸Î± Î´Î¿Ï…Î»Î­ÏˆÎµÎ¹!
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-3">
                                        Hardware ID * <span class="text-red-600">(Î ÏÎ­Ï€ÎµÎ¹ Î½Î± ÎµÎ¯Î½Î±Î¹ 100% ÏƒÏ‰ÏƒÏ„ÏŒ!)</span>
                                    </label>
                                    <textarea 
                                        id="hardware-id" 
                                        required 
                                        rows="4"
                                        class="w-full px-4 py-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-600 focus:border-brand-600 transition-colors text-lg font-mono"
                                        placeholder="ÎšÏŒÎ»Î»Î·ÏƒÎµ ÎµÎ´Ï Ï„Î¿ Hardware ID Î±Ï€ÏŒ Ï„Î·Î½ ÎµÏ†Î±ÏÎ¼Î¿Î³Î® POSPal..."
                                    ></textarea>
                                </div>
                            </div>
                            
                            <!-- Error Message -->
                            <div id="error-message" class="hidden bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-lg mb-8"></div>
                            
                            <!-- Submit Button -->
                            <div class="border-t border-gray-200 pt-8">
                                <button 
                                    type="submit" 
                                    id="checkout-button"
                                    class="w-full bg-brand-600 text-white py-5 rounded-xl text-xl font-semibold hover:bg-brand-700 transition-colors inline-flex items-center justify-center"
                                >
                                    <i class="fas fa-shopping-cart mr-3"></i>
                                    Î‘Î³ÏŒÏÎ±ÏƒÎµ Ï„ÏÏÎ± - â‚¬290
                                </button>
                                
                                <div class="flex items-center justify-center space-x-8 pt-6 text-sm text-gray-500">
                                    <div class="flex items-center">
                                        <i class="fas fa-lock mr-2 text-green-600"></i>
                                        Î‘ÏƒÏ†Î±Î»Î®Ï‚ Ï€Î»Î·ÏÏ‰Î¼Î® Î¼Îµ Stripe
                                    </div>
                                    <div class="flex items-center">
                                        <i class="fas fa-envelope mr-2 text-blue-600"></i>
                                        Î†Î¼ÎµÏƒÎ· Ï€Î±ÏÎ¬Î´Î¿ÏƒÎ· ÏƒÏ„Î¿ email
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            
            <!-- Support -->
            <div class="text-center mt-16">
                <div class="max-w-2xl mx-auto">
                    <h3 class="text-xl font-semibold text-gray-900 mb-4">Î§ÏÎµÎ¹Î¬Î¶ÎµÏƒÎ±Î¹ Î²Î¿Î®Î¸ÎµÎ¹Î±;</h3>
                    <p class="text-gray-600 mb-6">
                        Î‘Î½ Î±Î½Ï„Î¹Î¼ÎµÏ„Ï‰Ï€Î¯Î¶ÎµÎ¹Ï‚ Î´Ï…ÏƒÎºÎ¿Î»Î¯Î± ÏƒÏ„Î¿ Î½Î± Î²ÏÎµÎ¹Ï‚ Ï„Î¿ Hardware ID Î® Î­Ï‡ÎµÎ¹Ï‚ Î¿Ï€Î¿Î¹Î±Î´Î®Ï€Î¿Ï„Îµ ÎµÏÏÏ„Î·ÏƒÎ·, 
                        Î¼Î· Î´Î¹ÏƒÏ„Î¬ÏƒÎµÎ¹Ï‚ Î½Î± ÎµÏ€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î®ÏƒÎµÎ¹Ï‚ Î¼Î±Î¶Î¯ Î¼Î±Ï‚.
                    </p>
                    <a 
                        href="mailto:support@pospal.gr" 
                        class="inline-flex items-center px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium"
                    >
                        <i class="fas fa-envelope mr-2"></i>
                        support@pospal.gr
                    </a>
                </div>
            </div>
            
        </div>
    </section>
    
    <script>
        // Initialize Stripe (replace with your publishable key)
        let stripe;
        
        // Initialize Stripe with config from backend
        fetch('/api/config')
            .then(response => response.json())
            .then(config => {
                if (config.stripe && config.stripe.publishable_key) {
                    stripe = Stripe(config.stripe.publishable_key);
                } else {
                    console.error('Stripe publishable key not available');
                    alert('Payment system configuration error');
                }
            })
            .catch(error => {
                console.error('Failed to load configuration:', error);
                alert('Failed to initialize payment system');
            });
        
        const form = document.getElementById('license-form');
        const checkoutButton = document.getElementById('checkout-button');
        const errorMessage = document.getElementById('error-message');
        
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const customerName = document.getElementById('customer-name').value.trim();
            const customerEmail = document.getElementById('customer-email').value.trim();
            const customerEmailConfirm = document.getElementById('customer-email-confirm').value.trim();
            const hardwareId = document.getElementById('hardware-id').value.trim();
            const restaurantName = document.getElementById('restaurant-name').value.trim();
            
            // Validate form
            if (!customerName || !customerEmail || !customerEmailConfirm || !hardwareId) {
                showError('Î Î±ÏÎ±ÎºÎ±Î»Ï ÏƒÏ…Î¼Ï€Î»Î®ÏÏ‰ÏƒÎµ ÏŒÎ»Î± Ï„Î± Î±Ï€Î±Î¹Ï„Î¿ÏÎ¼ÎµÎ½Î± Ï€ÎµÎ´Î¯Î±.');
                return;
            }
            
            // Validate email format
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(customerEmail)) {
                showError('Î Î±ÏÎ±ÎºÎ±Î»Ï ÎµÎ¹ÏƒÎ¬Î³Î±Î³Îµ Î­Î³ÎºÏ…ÏÎ· Î´Î¹ÎµÏÎ¸Ï…Î½ÏƒÎ· email.');
                return;
            }
            
            // Validate emails match
            if (customerEmail !== customerEmailConfirm) {
                showError('Î¤Î± emails Î´ÎµÎ½ Ï„Î±Î¹ÏÎ¹Î¬Î¶Î¿Ï…Î½! Î Î±ÏÎ±ÎºÎ±Î»Ï ÎµÎ»Î­Î³Î¾Ï„Îµ Ï„Î± ÎºÎ±Î¹ Î¾Î±Î½Î±Î´Î¿ÎºÎ¹Î¼Î¬ÏƒÏ„Îµ.');
                return;
            }
            
            // Enhanced Hardware ID validation
            if (hardwareId.length < 20) {
                showError('Î¤Î¿ Hardware ID Ï†Î±Î¯Î½ÎµÏ„Î±Î¹ Ï€Î¿Î»Ï Î¼Î¹ÎºÏÏŒ. Î Î±ÏÎ±ÎºÎ±Î»Ï Î±Î½Ï„Î¯Î³ÏÎ±ÏˆÎµ Ï„Î¿ Î Î›Î—Î¡Î•Î£ Hardware ID Î±Ï€ÏŒ Ï„Î·Î½ ÎµÏ†Î±ÏÎ¼Î¿Î³Î® POSPal (Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· â†’ Î†Î´ÎµÎ¹Î± â†’ Î‘Î½Ï„Î¯Î³ÏÎ±ÏˆÎµ).');
                return;
            }
            
            // Check if it looks like a real hardware ID (contains alphanumeric characters)
            if (!/^[A-Za-z0-9\-_\s]+$/.test(hardwareId)) {
                showError('Î¤Î¿ Hardware ID Ï€ÎµÏÎ¹Î­Ï‡ÎµÎ¹ Î¼Î· Î­Î³ÎºÏ…ÏÎ¿Ï…Ï‚ Ï‡Î±ÏÎ±ÎºÏ„Î®ÏÎµÏ‚. Î Î±ÏÎ±ÎºÎ±Î»Ï Î±Î½Ï„Î¯Î³ÏÎ±ÏˆÎµ Ï„Î¿ Î±Ï€ÏŒ Ï„Î·Î½ ÎµÏ†Î±ÏÎ¼Î¿Î³Î® POSPal Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÏÎ½Ï„Î±Ï‚ Ï„Î¿ ÎºÎ¿Ï…Î¼Ï€Î¯ "Î‘Î½Ï„Î¯Î³ÏÎ±ÏˆÎµ".');
                return;
            }
            
            // Show loading state
            checkoutButton.disabled = true;
            checkoutButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-3"></i>Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± Ï€Î»Î·ÏÏ‰Î¼Î®Ï‚...';
            hideError();
            
            try {
                // Create Stripe Checkout Session
                const response = await fetch('/api/create-checkout-session', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        customerName,
                        customerEmail,
                        hardwareId,
                        restaurantName,
                        priceAmount: 29000, // â‚¬290.00 in cents
                        currency: 'eur'
                    }),
                });
                
                if (!response.ok) {
                    throw new Error('Î‘Ï€Î¿Ï„Ï…Ï‡Î¯Î± Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î±Ï‚ Ï€Î»Î·ÏÏ‰Î¼Î®Ï‚');
                }
                
                const session = await response.json();
                
                // Redirect to Stripe Checkout
                const { error } = await stripe.redirectToCheckout({
                    sessionId: session.id
                });
                
                if (error) {
                    throw new Error(error.message);
                }
                
            } catch (error) {
                console.error('Checkout error:', error);
                showError('Î‘Ï€Î¿Ï„Ï…Ï‡Î¯Î± Î­Î½Î±ÏÎ¾Î·Ï‚ Ï€Î»Î·ÏÏ‰Î¼Î®Ï‚. Î Î±ÏÎ±ÎºÎ±Î»Ï Î´Î¿ÎºÎ¯Î¼Î±ÏƒÎµ Î¾Î±Î½Î¬ Î® ÎµÏ€Î¹ÎºÎ¿Î¹Î½ÏÎ½Î·ÏƒÎµ Î¼Îµ Ï„Î·Î½ Ï…Ï€Î¿ÏƒÏ„Î®ÏÎ¹Î¾Î·.');
            } finally {
                checkoutButton.disabled = false;
                checkoutButton.innerHTML = '<i class="fas fa-shopping-cart mr-3"></i>Î‘Î³ÏŒÏÎ±ÏƒÎµ Ï„ÏÏÎ± - â‚¬290';
            }
        });
        
        function showError(message) {
            errorMessage.textContent = message;
            errorMessage.classList.remove('hidden');
            errorMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        function hideError() {
            errorMessage.classList.add('hidden');
        }
        
        // Auto-format Hardware ID textarea
        document.getElementById('hardware-id').addEventListener('input', function(e) {
            const value = e.target.value;
            const cleaned = value.replace(/\s+/g, ' ').trim();
            
            if (cleaned !== value) {
                e.target.value = cleaned;
            }
        });
    </script>
    
</body>
</html>
